<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Decision Tree</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f9;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        .tree-container {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin: 50px;
            width: 90%;
            position: relative;
        }

        .column {
            display: flex;
            flex-direction: column;
            gap: 20px;
            flex: 1;
            margin: 0 20px;
        }

        svg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        .line {
            stroke: #ccc;
            stroke-width: 2;
            transition: opacity 0.3s ease;
        }

        .line:hover {
            stroke: #007bff;
            stroke-width: 3;
        }

        .tooltip {
            position: absolute;
            background-color: #333;
            color: #fff;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 12px;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transform: translate(-50%, -10px);
            transition: opacity 0.2s ease, transform 0.2s ease;
            z-index: 3;
        }

        .tooltip.visible {
            opacity: 1;
            transform: translate(-50%, 0);
        }
    </style>
</head>
<body>
    <h1>Interactive Decision Tree</h1>
    <div class="tree-container">
        <div class="column" id="left-column"></div>
        <div class="column" id="right-column"></div>
    </div>

    <script>
        const groups = [
            { id: "group1", layers: [{ alias: "1A", label: "Button 1A" }] },
            { id: "group2", layers: [{ alias: "2A", label: "Button 2A" }] }
        ];

        const connections = [
            { from: "1A", to: "2A" }
        ];

        function renderTree() {
            const leftColumn = document.getElementById("left-column");
            const rightColumn = document.getElementById("right-column");

            groups.forEach((group, index) => {
                const column = index % 2 === 0 ? leftColumn : rightColumn;
                const groupDiv = document.createElement("div");

                group.layers.forEach(layer => {
                    const button = document.createElement("button");
                    button.innerText = layer.label;
                    button.id = layer.alias;
                    groupDiv.appendChild(button);
                });

                column.appendChild(groupDiv);
            });
        }

        function drawLines() {
            const container = document.querySelector(".tree-container");
            const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
            container.appendChild(svg);

            connections.forEach(({ from, to }) => {
                const startButton = document.getElementById(from);
                const endButton = document.getElementById(to);

                if (startButton && endButton) {
                    const startRect = startButton.getBoundingClientRect();
                    const endRect = endButton.getBoundingClientRect();
                    const containerRect = container.getBoundingClientRect();

                    const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
                    line.setAttribute("x1", startRect.left + startRect.width / 2 - containerRect.left);
                    line.setAttribute("y1", startRect.top + startRect.height / 2 - containerRect.top);
                    line.setAttribute("x2", endRect.left + endRect.width / 2 - containerRect.left);
                    line.setAttribute("y2", endRect.top + endRect.height / 2 - containerRect.top);

                    line.classList.add("line");
                    line.dataset.tooltip = `Connection from ${from} to ${to}`;
                    svg.appendChild(line);
                }
            });

            addLineTooltips();
        }

        function addLineTooltips() {
            const lines = document.querySelectorAll(".line");
            const tooltip = document.createElement("div");
            tooltip.className = "tooltip";
            document.body.appendChild(tooltip);

            lines.forEach(line => {
                line.addEventListener("mouseover", (event) => {
                    tooltip.innerText = line.dataset.tooltip;
                    const rect = line.getBoundingClientRect();
                    tooltip.style.left = `${(rect.left + rect.right) / 2}px`;
                    tooltip.style.top = `${rect.top - 20}px`;
                    tooltip.classList.add("visible");
                });

                line.addEventListener("mouseout", () => {
                    tooltip.classList.remove("visible");
                });
            });
        }

        window.onload = function () {
            renderTree();
            drawLines();
        };
    </script>
</body>
</html>
